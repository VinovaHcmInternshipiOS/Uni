//
//  ChangePasswordPresenter.swift
//  Uni
//
//  Created nguyen gia huy on 02/12/2020.
//  Copyright Â© 2020 ___ORGANIZATIONNAME___. All rights reserved.
//
//  Template generated by Edward
//

import Foundation
import FirebaseAuth
import FirebaseDatabase
import Firebase

// MARK: View -
protocol ChangePasswordViewProtocol: class {
    func changePasswordSuccess()
    func changePasswordFailed(error:Error)
}

// MARK: Presenter -
protocol ChangePasswordPresenterProtocol: class {
	var view: ChangePasswordViewProtocol? { get set }
    func changePassword(newPassword:String)

}

class ChangePasswordPresenter: ChangePasswordPresenterProtocol {

    weak var view: ChangePasswordViewProtocol?
    var ref = Database.database().reference()
    var databaseHandle = DatabaseHandle()
    var user = Auth.auth().currentUser
    
    func changePassword(newPassword:String) {
        Auth.auth().currentUser?.updatePassword(to: newPassword, completion: { [self] (error) in
            if error != nil {
                view?.changePasswordFailed(error: error!)
            } else {
                view?.changePasswordSuccess()
            }
        })
    
    }
  
}
