//
//  ConfirmPasswordViewController.swift
//  Uni
//
//  Created nguyen gia huy on 03/12/2020.
//  Copyright Â© 2020 ___ORGANIZATIONNAME___. All rights reserved.
//
//  Template generated by Edward
//

import UIKit

class ConfirmPasswordViewController: UIViewController {

    @IBOutlet weak var Spinner: UIActivityIndicatorView!
    @IBOutlet weak var btOk: UIButton!
    @IBOutlet weak var btCancel: UIButton!
    @IBOutlet weak var lbPassword: UILabel!
    @IBOutlet weak var txtPassword: UITextField!
    var presenter: ConfirmPasswordPresenterProtocol

	init(presenter: ConfirmPasswordPresenterProtocol) {
        self.presenter = presenter
        super.init(nibName: "ConfirmPasswordViewController", bundle: nil)
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

	override func viewDidLoad() {
        super.viewDidLoad()

        //presenter.view = self
        setupLanguage()
        setupUI()
        txtPassword.becomeFirstResponder()
    }
    
    func setupLanguage(){
        btCancel.setTitle(AppLanguage.Cancel.localized, for: .normal)
        lbPassword.text = AppLanguage.ConfirmPassword.EnterPassword.localized
        txtPassword.placeholder = AppLanguage.Password.localized
    }
    
    func setupUI(){
        lbPassword.textColor = AppColor.YellowFAB32A
        Spinner.isHidden = true
    }

    @IBAction func btCancel(_ sender: Any) {
        dismiss(animated: false, completion: nil)
    }
    
    @IBAction func btOk(_ sender: Any) {
        btOk.isHidden = true
        Spinner.isHidden = false
        Spinner.startAnimating()
        btCancel.isEnabled = false
        if let password = txtPassword.text {
            view.endEditing(true)
            presenter.confirmPassword(password:password)
        } else {return}
        
    }
}
